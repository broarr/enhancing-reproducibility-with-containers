{"componentChunkName":"component---gatsby-theme-mdx-deck-src-templates-deck-js","path":"/","matchPath":"/*","webpackCompilationHash":"36d19722338e00f93aba","result":{"data":{"deck":{"id":"09fa5fe3-6d34-555f-9e17-dfc3bf624718","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar theme = vsDark;\nvar _frontmatter = {};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  theme: theme,\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"Enhancing Reproducibility\"), mdx(\"h2\", null, \"With Containers\"), mdx(\"hr\", null), mdx(\"h2\", null, \"\\uD83D\\uDC4B I'm Bradford Roarr\"), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Software developer with CIS here at Brown\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"I work with cloud technologies and containerization\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"\\uD83D\\uDC69\\u200D\\uD83D\\uDCBB I'm a developer\"), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Worked in private, government and now higher-ed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Worked for small and large companies\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Most recently worked for the company that made the sensors in the mail room\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"\\uD83D\\uDC69\\u200D\\uD83D\\uDD2C Not a scientist\"), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Never have been\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"But I still feel qualified to give this talk because\"))), mdx(\"hr\", null), mdx(\"h2\", null, mdx(\"em\", {\n    parentName: \"h2\"\n  }, \"Reproducibility is important!\")), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For all of us, not just scientists\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Yes, software reproducibility enables better science\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Also reduces the set of bugs that can occur in production software\"))), mdx(\"hr\", null), mdx(Invert, {\n    mdxType: \"Invert\"\n  }, mdx(\"h2\", null, \"This talk is not about data\"), mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"h3\", null, \"Data is its own special thing\"))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"I am not qualified to talk about data\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"I'm going to focus on software reproducibility\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Ingredients of Reproducibility\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Source code\")), mdx(\"li\", null, mdx(\"h4\", null, \"Third-Party libraries\")), mdx(\"li\", null, mdx(\"h4\", null, \"Runtime environment\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Need each ingredient to get good reproducibility\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Source code\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Captured in version control\")), mdx(\"li\", null, mdx(\"h4\", null, \"Releases tagged\")), mdx(\"li\", null, mdx(\"h4\", null, \"Immutable tags\")))), mdx(\"hr\", null), mdx(\"h2\", null, \"Third-Party libraries\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Captured in a package manifest file\")), mdx(\"li\", null, mdx(\"h4\", null, \"Libraries pegged to \", mdx(\"em\", null, \"specific\"), \" version\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Peg libraries to one version, not a range\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Select libraries that are maintained and have a corporate sponsor\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Now what?\"), mdx(\"hr\", null), mdx(\"h2\", null, \"Runtime environment\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Capture system software requirements\")), mdx(\"li\", null, mdx(\"h4\", null, \"Freeze runtime environment\")), mdx(\"li\", null, mdx(\"h4\", null, \"Package runtime environment for consumption\")))), mdx(\"hr\", null), mdx(\"h2\", null, \"How?\"), mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"h1\", null, mdx(\"em\", {\n    parentName: \"h1\"\n  }, \"Containers!\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Containers\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Capture system software requirements\")), mdx(\"li\", null, mdx(\"h4\", null, \"Freeze runtime environment\")), mdx(\"li\", null, mdx(\"h4\", null, \"Package runtime environment for consumption\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How many have hear of containers?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How many use containers?\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Great abstraction for capturing environment\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Still not perfect\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Container Runtimes\"), mdx(Split, {\n    mdxType: \"Split\"\n  }, mdx(Logo, {\n    mdxType: \"Logo\"\n  }, mdx(\"img\", {\n    alt: \"Docker\",\n    src: \"https://beta.docker.com/img/applicationdesigner.png\"\n  })), mdx(Logo, {\n    mdxType: \"Logo\"\n  }, mdx(\"img\", {\n    alt: \"Singularity\",\n    src: \"https://singularity.lbl.gov/images/logo/logo.svg\"\n  }))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Two main contenders at Brown\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Singularity more used for research\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Docker used for application development\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Container Runtimes\"), mdx(Logo, {\n    mdxType: \"Logo\"\n  }, mdx(\"img\", {\n    alt: \"Docker\",\n    src: \"https://beta.docker.com/img/applicationdesigner.png\"\n  })), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Going to use Docker today\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"I'm more familiar with Docker\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Both are OCI compliant\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"OCI = Open Container Initiative\"))), mdx(\"hr\", null), mdx(CodeSurfer, {\n    mdxType: \"CodeSurfer\"\n  }, mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-dockerfile\",\n    \"metastring\": \"file=src/Dockerfile\",\n    \"file\": \"src/Dockerfile\"\n  }), \"FROM python\\n\\nRUN apt-get update && apt-get install -y \\\\\\n    libxml2-dev \\\\\\n    libsqlite3-dev\\n\\nCOPY requirements.txt .\\nRUN pip install -r requirements.txt\\n\\nRUN useradd -mUs /bin/bash python \\\\\\n    && mkdir -p /app \\\\\\n    && chown -R python:python /app\\n\\nUSER python\\nWORKDIR /app\\nCOPY . ./\\n\\nENTRYPOINT [\\\"python\\\"]\\nCMD [\\\"my-script.py\\\"]\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-diff\",\n    \"metastring\": \"1,3:5\",\n    \"1,3:5\": true\n  }), \"\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"1\": true,\n    \"className\": \"language-diff\",\n    \"metastring\": \"1 subtitle=\\\"No Docker image tag specified\\\"\",\n    \"subtitle\": \"\\\"No\",\n    \"Docker\": true,\n    \"image\": true,\n    \"tag\": true,\n    \"specified\\\"\": true\n  }), \"\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"1\": true,\n    \"className\": \"language-diff\",\n    \"metastring\": \"1 subtitle=\\\"Better - Short version of runtime \\\"\",\n    \"subtitle\": \"\\\"Better\",\n    \"-\": true,\n    \"Short\": true,\n    \"version\": true,\n    \"of\": true,\n    \"runtime\": true,\n    \"\\\"\": true\n  }), \"--- Dockerfile  2019-10-25 14:21:55.000000000 -0400\\n+++ Dockerfile  2019-10-25 14:41:29.000000000 -0400\\n@@ -1,4 +1,4 @@\\n-FROM python\\n+FROM python:3.8\\n\\n RUN apt-get update && apt-get install -y \\\\\\n     libxml2-dev \\\\\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"1\": true,\n    \"className\": \"language-diff\",\n    \"metastring\": \"1 subtitle=\\\"Best - Full version and OS designator\\\"\",\n    \"subtitle\": \"\\\"Best\",\n    \"-\": true,\n    \"Full\": true,\n    \"version\": true,\n    \"and\": true,\n    \"OS\": true,\n    \"designator\\\"\": true\n  }), \"--- Dockerfile  2019-10-25 14:21:55.000000000 -0400\\n+++ Dockerfile  2019-10-25 14:41:29.000000000 -0400\\n@@ -1,4 +1,4 @@\\n-FROM python:3.8\\n+FROM python:3.8.0-buster\\n\\n RUN apt-get update && apt-get install -y \\\\\\n     libxml2-dev \\\\\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-diff\",\n    \"metastring\": \"1,3:5\",\n    \"1,3:5\": true\n  }), \"\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-diff\",\n    \"metastring\": \"3:5 subtitle=\\\"No package versions specified\\\"\",\n    \"3:5\": true,\n    \"subtitle\": \"\\\"No\",\n    \"package\": true,\n    \"versions\": true,\n    \"specified\\\"\": true\n  }), \"\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-diff\",\n    \"metastring\": \"3:5 subtitle=\\\"Specify exact versions for system software\\\"\",\n    \"3:5\": true,\n    \"subtitle\": \"\\\"Specify\",\n    \"exact\": true,\n    \"versions\": true,\n    \"for\": true,\n    \"system\": true,\n    \"software\\\"\": true\n  }), \"--- Dockerfile  2019-10-25 14:21:55.000000000 -0400\\n+++ Dockerfile  2019-10-25 14:52:54.000000000 -0400\\n@@ -1,8 +1,8 @@\\n FROM python:3.8.0-buster\\n\\n RUN apt-get update && apt-get install -y \\\\\\n-    libxml2-dev \\\\\\n-    libsqlite3-dev\\n+    libxml2-dev=2.9.4+dfsg1-7+b3 \\\\\\n+    libsqlite3-dev=3.27.2-3\\n\\n COPY requirements.txt .\\n RUN pip install -r requirements.txt\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-diff\"\n  }), \"\"))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Contrived dockerfile\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Builds our image, but doesn't run\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Few common gotchas when making new images\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Dockerfile Gotchas\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Always specify full version for images\")), mdx(\"li\", null, mdx(\"h4\", null, \"Always specify versions of system software\")), mdx(\"li\", null, mdx(\"h4\", null, \"Understand the OS your image uses\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Different operating systems have different packages\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Alpine linux uses a different libc (glibc vs musl)\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Building containers\"), mdx(CodeSurfer, {\n    mdxType: \"CodeSurfer\"\n  }, mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell-session\"\n  }), \"$ docker build .\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell-session\",\n    \"metastring\": \"subtitle=\\\"Better - Named image and implicit tag\\\"\",\n    \"subtitle\": \"\\\"Better\",\n    \"-\": true,\n    \"Named\": true,\n    \"image\": true,\n    \"and\": true,\n    \"implicit\": true,\n    \"tag\\\"\": true\n  }), \"$ docker build -t science .\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell-session\",\n    \"metastring\": \"subtitle=\\\"Best - Named image and explicit tag\\\"\",\n    \"subtitle\": \"\\\"Best\",\n    \"-\": true,\n    \"Named\": true,\n    \"image\": true,\n    \"and\": true,\n    \"explicit\": true,\n    \"tag\\\"\": true\n  }), \"$ docker build -t science:1.0.7 .\\n\"))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"This bit is Docker specific\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Singularity container names based on file paths/names\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Image is built and tagged with a well specified runtime\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Time to gather results and do some science\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Distributing Containers\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Distribute exact copy of runtime\")), mdx(\"li\", null, mdx(\"h4\", null, \"Sign to prove ownership\")), mdx(\"li\", null, mdx(\"h4\", null, \"Publish public key used to sign container\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Papers written, science complete\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Distribute container with source to reproduce experiments\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Docker can only be distributed through hubs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Singularity generates a file that can be shared\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Docker Content Trust\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Everything is handled by Docker\")), mdx(\"li\", null, mdx(\"h4\", null, \"Deisgned for security not just verification\")), mdx(\"li\", null, mdx(\"h4\", null, \"Controlled by Notary system\")), mdx(\"li\", null, mdx(\"h4\", null, \"Much more complicated than Singularity\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"DCT initialized on registry and repository\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Admin generates delegate keys for user\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"User pushes image with DTC enabled\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Signing and verification automatic\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Singularity\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"User generates keys\")), mdx(\"li\", null, mdx(\"h4\", null, \"User signs image\")), mdx(\"li\", null, mdx(\"h4\", null, \"Peer verifies image signature\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Two commands\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Sign\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Verify\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Containers aren't perfect\"), mdx(\"ul\", null, mdx(Appear, {\n    mdxType: \"Appear\"\n  }, mdx(\"li\", null, mdx(\"h4\", null, \"Rely on host system kernel\")), mdx(\"li\", null, mdx(\"h4\", null, \"Signatures don't capture runtime changes\")), mdx(\"li\", null, mdx(\"h4\", null, \"Hardware differences matter\")))), mdx(Notes, {\n    mdxType: \"Notes\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Document kernel differences\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Document hardware used to produce results\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Don't modify code at runtime\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Don't dynamically download code or libraries at runtime\"))), mdx(\"hr\", null), mdx(\"h2\", null, \"Questions?\"), mdx(\"p\", null, \"bradford_roarr@brown.edu\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"matchPath":"/*","isCreatedByStatefulCreatePages":false,"id":"09fa5fe3-6d34-555f-9e17-dfc3bf624718","slug":"","title":"Enhancing Reproducibility"}}}